/*! sitefinity-webservices-sdk 2016-05-03 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Sitefinity=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){this._token=null,this._serviceUrl=a.serviceUrl}var e=a("./Request").CreateRequest;a("./Request").LogoutRequest,a("./utils");d.prototype.login=function(a,b,c,d){var f=this,g=new e({data:{username:a,password:b},urlOptions:{baseUrl:f._serviceUrl+"login"},successCb:function(a){f.setToken(a.value),"function"==typeof c&&c(a.value)},failureCb:d});g._execute()},d.prototype.logout=function(a,b){var c=this,d=new e({urlOptions:{baseUrl:c._serviceUrl+"logout",token:c.getToken()},successCb:function(b){c.setToken(null),"function"==typeof a&&a(b)},failureCb:b});d._execute()},d.prototype.setToken=function(a){this._token=a},d.prototype.getToken=function(){return this._token},b.exports=d},{"./Request":9,"./utils":16}],2:[function(a,b,c){function d(a,b){this.urlOptions=a,this._factory=b,this._requests=[],this._counter=0}function e(a){f.call(this,a),this._factory=a._factory,this._requests=[],this._counter=0,this.boundary=this._createBoundary("sf_batch_"),this.responseHeaderRegex=/^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/,this.responseStatusRegex=/^HTTP\/1\.\d (\d{3}) (.*)$/i}var f=a("./Request").CreateRequest,g=a("./Request").UpdateRequest,h=a("./Request").UploadRequest,i=a("./Request").RequestBase,j=a("./Request").CreateRelatedRequest,k=a("./utils");d.prototype.upload=function(a){var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,data:a.data,contentType:a.contentType,fileName:a.fileName},d=this._factory.upload(c);return this.addRequest(this,d)},d.prototype.create=function(a){if(!a&&!a.entitySet)throw"entitySet is required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,data:a.data},d=this._factory.create(c);return this.addRequest(this,d)},d.prototype.update=function(a){if(!(a||a.entitySet||a.key||a.data))throw"parameters: entitySet, key and data are required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,key:a.key,data:a.data},d=this._factory.update(c);this._overrideUrlGeneration(d,a.key),this.addRequest(this,d)},d.prototype.destroy=function(a){if(!(a||a.entitySet||a.key))throw"parameters: entitySet and key are required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,key:a.key},d=this._factory.destroy(c);this._overrideUrlGeneration(d,a.key),this.addRequest(this,d)},d.prototype.destroyRelated=function(a){if(!(a||a.entitySet||a.key))throw"parameters: entitySet and key are required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,key:a.key,navigationProperty:a.navigationProperty},d=this._factory.destroyRelated(c);this._overrideUrlGeneration(d,a.key),this.addRequest(this,d)},d.prototype.destroyRelatedById=function(a){if(!(a||a.entitySet||a.key||a.relatedKey||a.navigationProperty))throw"parameters: entitySet, key, relatedKey and navigationProperty are required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,key:a.key,relatedKey:a.relatedKey,navigationProperty:a.navigationProperty},d=this._factory.destroyRelatedById(c);this.addRequest(this,d)},d.prototype.createRelated=function(a){if(!(a||a.entitySet||a.key||a.link||a.navigationProperty))throw"parameters: entitySet, key, link and navigationProperty are required!";var b=this.urlParametersClone(a.entitySet);for(var c in this._requests)this._requests[c].id==a.link&&(a.link="$"+this._requests[c].id);var d={"@odata.id":a.link},e={urlOptions:b,key:a.key,navigationProperty:a.navigationProperty,data:d},f=this._factory.createRelated(e);return this._overrideUrlGeneration(f,a.key),this.addRequest(this,f)},d.prototype._overrideUrlGeneration=function(a,b){for(var c in this._requests)this._requests[c].id==b&&(a._buildUrl=function(){return"$"+b})},d.prototype.addRequest=function(a,b){return a._requests.push({id:a._counter,request:b}),a._counter++},d.prototype.urlParametersClone=function(a){var b=k.clone(this.urlOptions);return b.entitySet=a,b},k.inheritsFrom(e,f),e.constants={newLine:"\r\n"},e.prototype.get=function(a){if(!a&&!a.entitySet)throw"entitySet is required!";var b=this.urlParametersClone(a.entitySet);a&&a.query&&(b.ODataParams=a.query);var c={urlOptions:b},d=this._factory.get(c);this.addRequest(d)},e.prototype.getSingle=function(a){if(!(a||a.entitySet||a.key))throw"parameters: entitySet and key are required!";var b=this.urlParametersClone(a.entitySet);a.query&&(option.ODataParams=a.query);var c={urlOptions:b,key:a.key},d=this._factory.getSingle(c);this.addRequest(d)},e.prototype.getProperty=function(a){if(a||a.entitySet||a.key,!a.property)throw"parameters: entitySet, key and property are required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,key:a.key,navigationProperty:a.property},d=this._factory.getProperty(c);this.addRequest(d)},e.prototype.getRelated=function(a){if(!(a||a.entitySet||a.key||a.navigationProperty))throw"parameters: entitySet, key and navigationProperty are required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,key:a.key,navigationProperty:a.navigationProperty},d=this._factory.getRelated(c);this.addRequest(d)},e.prototype.getRelatedById=function(a){if(!(a||a.entitySet||a.key||a.relatedKey||a.navigationProperty))throw"parameters: entitySet, key, relatedKey and navigationProperty are required!";var b=this.urlParametersClone(a.entitySet),c={urlOptions:b,key:a.key,relatedKey:a.relatedKey,navigationProperty:a.navigationProperty},d=this._factory.getRelatedById(c);this.addRequest(d)},e.prototype.beginTransaction=function(){var a=k.clone(this.urlOptions);return newTransaction=new d(a,this._factory),newTransaction.id=++this._counter,newTransaction},e.prototype.endTransaction=function(a){this._requests.push({id:a.id,request:a})},e.prototype.execute=function(){this._execute()},e.prototype._setRequestHeaders=function(a){i.prototype._setRequestHeaders.call(this,a);var b="multipart/mixed; boundary="+this.boundary;a.setRequestHeader(i.headers.contentType,b)},e.prototype._send=function(a){var b=this._buildRequestBody();a.send(b)},e.prototype._buildUrl=function(){return this.urlOptions.baseUrl+"$batch"},e.prototype._parseResponse=function(a){var b={position:0,boundaries:[]},c=b.position,d=this._readHeaders(a.getAllResponseHeaders(),b),e=this._contentType(d["Content-Type"]);e&&"multipart/mixed"==e.mediaType&&b.boundaries.push(e.properties.boundary),b.position=c;for(var f=this._parseBatchResponse(a.responseText,b),g=[],h=0;h<f.length;h++)try{var i=f[h].__changeResponses;if(i){var j=[];for(var k in i)j.push({data:i[k].response.body.length>0?JSON.parse(i[k].response.body):i[k].response.body,statusCode:i[k].response.statusCode,headers:i[k].response.headers});g.push(j)}else g.push({data:JSON.parse(f[h].response.body),statusCode:f[h].response.statusCode,headers:f[h].response.headers})}catch(l){continue}return g},e.prototype._parseBatchResponse=function(a,b){var c="--"+this._currentBoundary(b);this._readTo(a,c,b),this._readLine(a,b);for(var d,e=[];"--"!==d&&b.position<a.length;){var f,g=this._readHeaders(a,b),h=this._contentType(g["Content-Type"]);if(h&&"multipart/mixed"===h.mediaType){b.boundaries.push(h.properties.boundary);try{f=this._parseBatchResponse(a,b)}catch(i){i.response=this._readResponse(a,b,c),f=[i]}e.push({__changeResponses:f}),b.boundaries.pop(),this._readTo(a,"--"+this._currentBoundary(b),b)}else{if(!h||"application/http"!==h.mediaType)throw{message:"invalid MIME part type "};this._readLine(a,b);var j=this._readResponse(a,b,c);try{j=j.statusCode>=200&&j.statusCode<=299?{message:j.statusCode+" Http request is OK",response:j}:{message:"HTTP request failed",response:j}}catch(i){j=i}e.push(j)}d=a.substr(b.position,2),this._readLine(a,b)}return e},e.prototype._currentBoundary=function(a){var b=a.boundaries;return b[b.length-1]},e.prototype._contentType=function(a){if(!a)return null;var b,c,d=a.split(";"),e={};for(b=1,c=d.length;c>b;b++){var f=d[b].split("=");e[f[0].replace(/^\s+|\s+$/g,"")]=f[1]}return{mediaType:d[0].replace(/^\s+|\s+$/g,""),properties:e}},e.prototype._readTo=function(a,b,c){var d=c.position||0,e=a.length;if(b){if(e=a.indexOf(b,d),-1===e)return null;c.position=e+b.length}else c.position=e;return a.substring(d,e)},e.prototype._readLine=function(a,b){return this._readTo(a,e.constants.newLine,b)},e.prototype._readHeaders=function(a,b){var c,d,e,f={};do e=b.position,d=this._readLine(a,b),c=this.responseHeaderRegex.exec(d),null!==c?f[c[1]]=c[2]:b.position=e;while(d&&c);return f},e.prototype._readResponse=function(a,b,c){var d,e,f,g=b.position,h=this.responseStatusRegex.exec(this._readLine(a,b));return h?(d=h[1],e=h[2],f=this._readHeaders(a,b),this._readLine(a,b)):b.position=g,{statusCode:d,statusText:e,headers:f,body:this._readTo(a,"\r\n"+c,b)}},e.prototype._buildRequestBody=function(){var a="";for(var b in this._requests){var c=this._requests[b].request;0!=b&&(a+=e.constants.newLine+e.constants.newLine),a+="--"+this.boundary,a+=c instanceof d?this._buildTransaction(c):this._buildRequest(c)}return a+=this._createDelimeter(this.boundary,!0)},e.prototype._buildRequest=function(a){var b=e.constants.newLine+"Content-Type: application/http";return b+=e.constants.newLine+"Content-Transfer-Encoding: binary",b+=e.constants.newLine+e.constants.newLine+a._getMethod()+" "+a._buildUrl()+" HTTP/1.1"},e.prototype._buildTransaction=function(a){if(0!=a._requests.length){var b=e.constants.newLine,c=this._createBoundary("sf_changeset_");b+="Content-Type: multipart/mixed; boundary="+c;var d=a._requests;for(var k in d){var l=d[k].request;b+=this._createDelimeter(c,!1),b+=e.constants.newLine+"Content-Type: application/http",b+=e.constants.newLine+"Content-Transfer-Encoding: binary",b+=e.constants.newLine+"Content-ID: "+d[k].id;var m=l._buildUrl();b+="\r\n\r\n"+l._getMethod()+" "+m+(l instanceof j?"/"+l.navigationProperty+"/$ref":"")+" HTTP/1.1",(l instanceof f||l instanceof g)&&(l instanceof h?(b+=e.constants.newLine+i.headers.contentType+": "+l.contentType,b+=e.constants.newLine+"X-File-Name: "+l.fileName,b+=e.constants.newLine+"Content-Encoding: base64"):b+=e.constants.newLine+i.headers.contentType+": "+i.contentTypes.json,b+="\r\n\r\n"+l.data)}return b+=this._createDelimeter(c,!0)}},e.prototype._createDelimeter=function(a,b){var c=e.constants.newLine+e.constants.newLine+"--"+a;return b&&(c+="--"),c},e.prototype._createBoundary=function(a){return a+k.hex16()+"-"+k.hex16()+"-"+k.hex16()},e.prototype.addRequest=function(a){return d.prototype.addRequest(this,a)},e.prototype.urlParametersClone=function(a){return d.prototype.urlParametersClone.call(this,a)},b.exports=e},{"./Request":9,"./utils":16}],3:[function(a,b,c){var d=a("./RequestFactory");b.exports=function(){function a(a){this.urlOptions=a,this.factory=new d}return a.prototype={get:function(a){a||(a={}),a.query&&(this.urlOptions.ODataParams=a.query);var b=this.factory.get({urlOptions:this.urlOptions,successCb:a.successCb,failureCb:a.failureCb});b._execute()},getSingle:function(a){if(!a.key)throw"Parameter 'key' is required!";a.query&&(this.urlOptions.ODataParams=a.query);var b=this.factory.getSingle({urlOptions:this.urlOptions,key:a.key,successCb:a.successCb,failureCb:a.failureCb});b._execute()},create:function(a){if(!a.data)throw"Parameter 'data' is required!";var b=this.factory.create({urlOptions:this.urlOptions,data:a.data,successCb:a.successCb,failureCb:a.failureCb});b._execute()},update:function(a){if(!a.key&&!a.data)throw"Parameters: 'data' and 'key' are required!";var b=this.factory.update({urlOptions:this.urlOptions,key:a.key,data:a.data,successCb:a.successCb,failureCb:a.failureCb});b._execute()},destroy:function(a){if(!a.key)throw"Parameter 'key' is required!";var b=this.factory.destroy({urlOptions:this.urlOptions,key:a.key,successCb:a.successCb,failureCb:a.failureCb});b._execute()},getProperty:function(a){if(!a.key&&!a.property)throw"Parameters: 'data' and 'property' are required!";var b=this.factory.getProperty({urlOptions:this.urlOptions,key:a.key,navigationProperty:a.property,successCb:a.successCb,failureCb:a.failureCb});b._execute()},getRelated:function(a){if(!a.key&&!a.navigationProperty)throw"Parameters: 'data' and 'navigationProperty' are required!";var b=this.factory.getRelated({urlOptions:this.urlOptions,key:a.key,navigationProperty:a.navigationProperty,successCb:a.successCb,failureCb:a.failureCb});b._execute()},getRelatedById:function(a){if(!(a.key||a.navigationProperty||a.relatedKey))throw"Parameters: 'data', 'relatedKey' and 'navigationProperty' are required!";var b=this.factory.getRelatedById({urlOptions:this.urlOptions,key:a.key,relatedKey:a.relatedKey,navigationProperty:a.navigationProperty,successCb:a.successCb,failureCb:a.failureCb});b._execute()},destroyRelated:function(a){if(!a.key&&!a.navigationProperty)throw"Parameters: 'data' and 'navigationProperty' are required!";var b=this.factory.destroyRelated({urlOptions:this.urlOptions,key:a.key,navigationProperty:a.navigationProperty,successCb:a.successCb,failureCb:a.failureCb});b._execute()},destroyRelatedById:function(a){if(!(a.key||a.navigationProperty||a.relatedKey))throw"Parameters: 'data', 'relatedKey' and 'navigationProperty' are required!";var b=this.factory.destroyRelatedById({urlOptions:this.urlOptions,key:a.key,relatedKey:a.relatedKey,navigationProperty:a.navigationProperty,successCb:a.successCb,failureCb:a.failureCb});b._execute()},createRelated:function(a){if(!(a.key||a.navigationProperty||a.link))throw"Parameters: 'data', 'link' and 'navigationProperty' are required!";var b={"@odata.id":a.link},c=this.factory.createRelated({urlOptions:this.urlOptions,key:a.key,navigationProperty:a.navigationProperty,data:b,successCb:a.successCb,failureCb:a.failureCb});c._execute()},upload:function(a){if(!(a||a.data||a.data.content||a.data.contentType||a.data.payload||a.data.name||a.library||a.link))throw"parameters: entitySet, data, file, library and link are required!";var b={urlOptions:this.urlOptions,_factory:this.factory,successCb:a.successCb,failureCb:a.failureCb},c=this.factory.batch(b),d=c.beginTransaction(),e=d.upload({entitySet:this.urlOptions.entitySet,data:a.data.content,contentType:a.data.contentType,fileName:a.data.name});d.update({entitySet:this.urlOptions.entitySet,key:e,data:a.data.payload}),d.createRelated({entitySet:this.urlOptions.entitySet,key:e,navigationProperty:a.library,link:a.link}),c.endTransaction(d),c.execute()}},a}()},{"./RequestFactory":10}],4:[function(a,b,c){function d(a){this.type=a}function e(a,b,c){d.call(this,a),this.parameter=b,this.constant=c}function f(a,b){d.call(this,a),b?this.expressions=[].concat(b):this.expressions=[]}var g=a("./utils");d.prototype={getType:function(){return this.type}},g.inheritsFrom(e,d),e.prototype.getParameter=function(){return this.parameter},e.prototype.getConstant=function(){return this.constant},g.inheritsFrom(f,d),f.prototype.getExpressions=function(){return this.expressions},b.exports={BinaryExpression:e,ComplexExpression:f}},{"./utils":16}],5:[function(a,b,c){function d(a,b){if(!e.isString(a))throw new Error("Property name is not a valid string");a=a.trim();var c=a.split(" ");if(c.length>1&&b!==!0&&b!==!1&&(b="desc"==c[1].toLowerCase(),!b)){var d="asc"==c[1].toLowerCase();if(!d)throw new Error("the second word in the propertyPath must begin with 'desc' or 'asc'")}this._propertyPath=c[0],this._isDesc=b}var e=a("./utils");d.prototype={getPropertyPath:function(){return this._propertyPath},getDirection:function(){return this._isDesc},getValue:function(){var a=this._isDesc?"desc":"asc";return this._propertyPath+" "+a}},b.exports=d},{"./utils":16}],6:[function(a,b,c){function d(){e.call(this),this._order=null,this._skip=null,this._take=null,this._count=null,this.expr=null}var e=(a("./constants").OperatorType,a("./QueryBase")),f=a("./WhereQuery"),g=a("./utils"),h=a("./QueryBuilder"),i=a("./OrderProperty");g.inheritsFrom(d,e),d.prototype.where=function(){var a=this._clone(function(a){a.expr=new f(a)});return a.expr},d.prototype.order=function(){var a=this._extractArguments(arguments);return this._validatePropertyPaths(a),this._clone(function(b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=new i(e);c.push(f)}b._order=c})},d.prototype.skip=function(a){return this._clone(function(b){b._skip=a})},d.prototype.take=function(a){return this._clone(function(b){b._take=a})},d.prototype.count=function(){return this._clone(function(a){a._count=!0})},d.prototype._getFilter=function(){return this.expr},d.prototype._getOrderBy=function(){return this._order},d.prototype.build=function(){return new h(this).build()},b.exports=d},{"./OrderProperty":5,"./QueryBase":7,"./QueryBuilder":8,"./WhereQuery":12,"./constants":13,"./utils":16}],7:[function(a,b,c){function d(){this._select=null,this._expand=null}var e=a("./utils");d.prototype={select:function(){var a=this._extractArguments(arguments);return this._validatePropertyPaths(a),this._clone(function(b){b._select=a})},expand:function(){var a=this._extractArguments(arguments);return this._validatePropertyPaths(a),this._clone(function(b){b._expand=a})},_extractArguments:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},_getSelect:function(){return this._select},_getExpand:function(){return this._expand},_validatePropertyPaths:function(a,b){b=b||!1;for(var c=0;c<a.length;c++){var d=a[c];if(!e.isString(d))throw new Error("Invalid argument in clause");if(!b&&d.indexOf(".")>-1)throw new Error("Invalid argument in clause")}},_clone:function(a){var b=e.clone(this,new d,a);return b}},b.exports=d},{"./utils":16}],8:[function(a,b,c){function d(a){this.query=a}var e=a("./Expression").ComplexExpression,f=a("./Expression").BinaryExpression,g=a("./WhereQuery"),h=a("./constants"),i=a("./OrderProperty"),j=a("./utils");d.prototype={build:function(){var a={};return this._buildODataQueryParams(this.query,a),a},_buildODataQueryParams:function(a,b){var c=h.ODataParams,d=a._getFilter();if(d instanceof g){var f=d._getExpression();f instanceof e&&(b[c.$filter]=this._buildComplexExpression(f))}var k=a._getSelect();k instanceof Array&&(b[c.$select]=k.join(", "));var l=a._getExpand();l instanceof Array&&(b[c.$expand]=l.join(", "));var m=a._order;if(m instanceof Array){var n=[];for(var o in m)m[o]instanceof i&&n.push(m[o].getValue());b[c.$orderby]=n.join(", ")}var p=a._take;j.isNumber(p)&&(b[c.$top]=p);var q=a._skip;j.isNumber(q)&&(b[c.$skip]=q);var r=a._count;return j.isBoolean(r)&&(b[c.$count]=r),b},_buildComplexExpression:function(a,b){if(!(a instanceof e))throw new Error("Invalid complex expression");for(var c=h.ExpressionType,d=0,g="",i=a.getExpressions();;){var j=i[d];if(j instanceof f?g+=this._buildBinaryExpression(j):j instanceof e&&(g+="("+this._buildComplexExpression(j,a.type)+")"),a.getType()===c.not&&(g=a.getType()+" "+g),a.getType()===c.any){for(var k=[],l=0;l<i.length;l++)i[l].type==c.contains||i[l].type==c.startsWith||i[l].type==c.endsWith?k.push(i[l].type.toLowerCase()+"(x, '"+i[l].constant+"')"):k.push("x "+i[l].type.toLowerCase()+" "+this._checkType(i[l].constant));g=j.parameter+"/"+a.getType()+"(x:"+k.join(" "+b+" ")+")"}if(d++,d==i.length)break;g+=" "+a.getType()+" "}return g},_buildBinaryExpression:function(a){if(!(a instanceof f))throw new Error("Invalid binary expression");var b=h.ExpressionType,c=null,d=a.getType();switch(d){case b.eq:case b.ne:case b.lt:case b.le:case b.gt:case b.ge:var e=a.getConstant(),g="({0} {1} {2})";c=g.format(a.getParameter(),d,this._checkType(e));break;case b.contains:case b.startsWith:case b.endsWith:c="{0}({1}, '{2}')".format(d.toLowerCase(),a.getParameter(),a.getConstant());break;default:var i="Unsupported operator {0}".format(d);throw new Error(i)}return c},_checkType:function(a){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(a)?a:"'"+a+"'"}},b.exports=d},{"./Expression":4,"./OrderProperty":5,"./WhereQuery":12,"./constants":13,"./utils":16}],9:[function(a,b,c){function d(a){this.successCb=a.successCb,this.failureCb=a.failureCb,this.urlOptions=a.urlOptions}function e(a){this.key=a.key,d.call(this,a)}function f(a){d.call(this,a)}function g(a){e.call(this,a)}function h(a){e.call(this,a)}function i(a){this.data=a.data,e.call(this,a)}function j(a){this.data=a.data,d.call(this,a)}function k(a){this.navigationProperty=a.navigationProperty,g.call(this,a)}function l(a){this.navigationProperty=a.navigationProperty,this.relatedKey=a.relatedKey,g.call(this,a)}function m(a){this.navigationProperty=a.navigationProperty,h.call(this,a)}function n(a){this.navigationProperty=a.navigationProperty,this.relatedKey=a.relatedKey,h.call(this,a)}function o(a){this.navigationProperty=a.navigationProperty,this.key=a.key,j.call(this,a)}function p(a){j.call(this,a),this.fileName=a.fileName,this.data=a.data,this.contentType=a.contentType}var q=a("./utils"),r=a("./constants");d.contentTypes={json:"application/json"},d.headers={contentType:"Content-Type"},d.prototype={_execute:function(){var a=new XMLHttpRequest;a.open(this._getMethod(),this._buildUrl(),!0);var b="application/json";this._setRequestHeaders(a,b);var c=this;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<=206&&"function"==typeof c.successCb){var b=c._parseResponse(a);c.successCb(b)}else a.status>=400&&"function"==typeof c.failureCb&&c.failureCb(a)},this._send(a)},_parseResponse:function(a){var b=null;try{b=JSON.parse(a.responseText),q._convertToDateObject(b)}catch(c){b=a.responseText}return b},_send:function(a){a.send()},_getMethod:function(){return null},_setRequestHeaders:function(a){if(this.urlOptions.token){var b=this.urlOptions.token;a.setRequestHeader("Authorization",b)}if(this.urlOptions.headers&&this.urlOptions.headers.length>0)for(var c=0;c<this.urlOptions.headers.length;c++){var d=this.urlOptions.headers[c];a.setRequestHeader(d.key,d.val)}a.setRequestHeader("X-SF-Service-Request","true")},_getQueryParameters:function(a,b){var c=r.SfParams;if(b.SFParams){var d=b.SFParams;d.provider&&(a[c.provider]=d.provider),d.culture&&(a[c.culture]=d.culture)}},_getQueryString:function(a){var b={};this._getQueryParameters(b,a);var c=Object.keys(b);if(0==c.length)return null;var d="?";for(var e in b)d+=e+"="+b[e]+"&";return d=d.substring(0,d.length-1)},_buildUrl:function(){var a=this.urlOptions.baseUrl+(this.urlOptions.entitySet||""),b=this._getQueryString(this.urlOptions);return b&&(a+=b),a}},q.inheritsFrom(e,d),e.prototype._buildUrl=function(){var a=this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")",b=this._getQueryString(this.urlOptions);return b&&(a+=b),a},q.inheritsFrom(f,d),f.prototype._getMethod=function(){return"GET"},f.prototype._getQueryParameters=function(a,b){var c=r.ODataParams;if(b.ODataParams){var e=b.ODataParams.build();q.isString(e.$filter)&&(a[c.$filter]=e.$filter),q.isString(e.$select)&&(a[c.$select]=e.$select),q.isString(e.$expand)&&(a[c.$expand]=e.$expand),q.isString(e.$orderby)&&(a[c.$orderby]=e.$orderby),q.isNumber(e.$skip)&&(a[c.$skip]=e.$skip),q.isNumber(e.$top)&&(a[c.$top]=e.$top),q.isBoolean(e.$count)&&(a[c.$count]=e.$count)}d.prototype._getQueryParameters.call(this,a,b)},q.inheritsFrom(g,e),g.prototype._getMethod=function(){return"GET"},g.prototype._getQueryParameters=function(a,b){var c=r.ODataParams;if(b.ODataParams){var e=b.ODataParams.build();q.isString(e.$select)&&(a[c.$select]=e.$select),q.isString(e.$expand)&&(a[c.$expand]=e.$expand)}d.prototype._getQueryParameters.call(this,a,b)},q.inheritsFrom(h,e),h.prototype._getMethod=function(){return"DELETE"},q.inheritsFrom(i,e),i.prototype._getMethod=function(){return"PATCH"},i.prototype._send=function(a){q._convertDateFieldToISOString(this.data),a.send(JSON.stringify(this.data))},i.prototype._setRequestHeaders=function(a){e.prototype._setRequestHeaders.call(this,a),a.setRequestHeader("Content-Type",d.contentTypes.json)},q.inheritsFrom(j,d),j.prototype._getMethod=function(){return"POST"},j.prototype._send=function(a){q._convertDateFieldToISOString(this.data),a.send(JSON.stringify(this.data))},j.prototype._setRequestHeaders=function(a){d.prototype._setRequestHeaders.call(this,a),a.setRequestHeader("Content-Type",d.contentTypes.json)},q.inheritsFrom(k,g),k.prototype._buildUrl=function(){return this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty},q.inheritsFrom(l,g),l.prototype._buildUrl=function(){return this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"("+this.relatedKey+")"},q.inheritsFrom(m,h),m.prototype._buildUrl=function(){return this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"/$ref"},q.inheritsFrom(n,h),n.prototype._buildUrl=function(){return this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"("+this.relatedKey+")/$ref"},q.inheritsFrom(o,j),o.prototype._buildUrl=function(){return this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"/$ref"},q.inheritsFrom(p,j),b.exports={RequestBase:d,GetRequest:f,GetByIdRequest:g,DeleteRequest:h,UpdateRequest:i,CreateRequest:j,GetRelatedRequest:k,GetRelatedByIdRequest:l,DeleteRelatedRequest:m,DeleteRelatedByIdRequest:n,CreateRelatedRequest:o,UploadRequest:p}},{"./constants":13,"./utils":16}],10:[function(a,b,c){var d=a("./Request").GetRequest,e=a("./Request").GetByIdRequest,f=a("./Request").CreateRequest,g=a("./Request").UploadRequest,h=a("./Request").UpdateRequest,i=a("./Request").DeleteRequest,j=a("./Request").GetRelatedRequest,k=a("./Request").GetRelatedByIdRequest,l=a("./Request").DeleteRelatedRequest,m=a("./Request").CreateRelatedRequest,n=a("./Request").DeleteRelatedByIdRequest,o=(a("./Request").RequestBase,a("./BatchRequest"));b.exports=function(){function a(){}return a.prototype={get:function(a){return new d(a)},getSingle:function(a){return new e(a)},create:function(a){return new f(a)},update:function(a){return new h(a)},destroy:function(a){return new i(a)},getProperty:function(a){return new j(a)},getRelated:function(a){return new j(a)},getRelatedById:function(a){return new k(a)},destroyRelated:function(a){return new l(a)},destroyRelatedById:function(a){return new n(a)},createRelated:function(a){return new m(a)},batch:function(a){return a._factory=this,new o(a)},upload:function(a){return new g(a)}},a}()},{"./BatchRequest":2,"./Request":9}],11:[function(a,b,c){var d=a("./Data"),e=a("./Authentication"),f=a("./utils"),g=(a("./BatchRequest"),a("./RequestFactory"));b.exports=function(){function a(a){this.profileUrl=f.addTrailingSlash(a.serviceUrl),this.authentication=new e({serviceUrl:this.profileUrl})}return a.prototype.data=function(a){var b={baseUrl:this.profileUrl,SFParams:{provider:a.providerName,culture:a.cultureName},token:this.authentication.getToken(),entitySet:a.urlName};return new d(b)},a.prototype.batch=function(a,b){var c=new g;return c.batch({successCb:a,failureCb:b,urlOptions:{baseUrl:this.profileUrl,token:this.authentication.getToken()}})},a}()},{"./Authentication":1,"./BatchRequest":2,"./Data":3,"./RequestFactory":10,"./utils":16}],12:[function(a,b,c){function d(a,b){this.parent=a,this.expressionObj=new f(b||e.and)}var e=a("./constants").ExpressionType,f=a("./Expression").ComplexExpression,g=a("./Expression").BinaryExpression;d.prototype={and:function(){return new d(this,e.and)},or:function(){return new d(this,e.or)},any:function(){return new d(this,e.any)},not:function(){return new d(this,e.not)},_simple:function(a,b,c){var d=new g(a,b,c),f=this.expressionObj.getExpressions();if(f.push(d),this.expressionObj.getType()===e.not&&f.length>1)throw new Error("Invalid operators count!");return this},eq:function(a,b){return this._simple(e.eq,a,b)},ne:function(a,b){return this._simple(e.ne,a,b)},gt:function(a,b){return this._simple(e.gt,a,b)},gte:function(a,b){return this._simple(e.gte,a,b)},lt:function(a,b){return this._simple(e.lt,a,b)},lte:function(a,b){return this._simple(e.lte,a,b)},startsWith:function(a,b,c){return this._simple(e.startsWith,a,b,c)},contains:function(a,b,c){return this._simple(e.contains,a,b,c)},endsWith:function(a,b,c){return this._simple(e.endsWith,a,b,c)},done:function(){return this.parent instanceof d&&(this.parent._addComplexExpression(this),this.expressionObj.getType()===e.not)?this.parent:this.parent},_addComplexExpression:function(a){var b=a._getExpression();this.expressionObj.getExpressions().push(b)},_getExpression:function(){return this.expressionObj}},d.prototype.equal=d.prototype.eq,d.prototype.notEqual=d.prototype.ne,d.prototype.greaterThan=d.prototype.gt,d.prototype.greaterThanEqual=d.prototype.gte,d.prototype.lessThan=d.prototype.lt,d.prototype.lessThanEqual=d.prototype.lte,b.exports=d},{"./Expression":4,"./constants":13}],13:[function(a,b,c){var d={ExpressionType:{query:1,where:100,and:"and",or:"or",not:"not",eq:"eq",ne:"ne",lt:"lt",le:"le",gt:"gt",ge:"ge",any:"any",contains:"contains",startsWith:"startsWith",endsWith:"endsWith"},ODataParams:{$filter:"$filter",$select:"$select",$expand:"$expand",$orderby:"$orderby",$skip:"$skip",$top:"$top",$count:"$count"},SfParams:{provider:"sf_provider",culture:"sf_culture"}};b.exports=d},{}],14:[function(a,b,c){var d=a("./Query"),e=a("./OrderProperty");b.exports=function(){var a=function(){function a(a){var c={},f=new d;if(a){if(a.skip&&(c.$skip=a.skip,delete a.skip),a.take&&(c.$take=a.take,delete a.take),a.sort){var g=a.sort,i={};b.isArray(g)||(g=[g]);var j;b.each(g,function(a,b){i[b.field]="asc"===b.dir?1:-1;var c=!1;-1==i[b.field]&&(c=!0),j=new e(b.field,c)}),j&&(c.$order=[],c.$order.push(j)),delete a.sort}if(a.filter){var k=f.where();h.build(k,a.filter),c.$where=k,delete a.filter}a.expand&&(c.$expand=[],c.$expand.push(a.expand),delete a.expand)}return c}if("undefined"!=typeof window&&"undefined"==typeof window.jQuery||"undefined"==typeof window.kendo)return null;var b=window.jQuery,c=window.kendo,f=(b.extend,c.data.RemoteTransport.extend({init:function(a){if(this.sitefinity$=a.dataProvider,!this.sitefinity$)throw new Error("An instance of the Sitefinity services sdk must be provided.");if(!a.urlName)throw new Error("A type name must be provided.");this.headers=a.headers,this.dataOptions={urlName:a.urlName,providerName:a.providerName,cultureName:a.CultureName},c.data.RemoteTransport.fn.init.call(this,a)},read:function(b){this.options.read&&this.options.read.data&&(b.data.expand=this.options.read.data.expand);var c=a(b.data),e=new d;e._order=c.$order,e._skip=c.$skip,e._take=c.$take,e._expand=c.$expand,e.expr=c.$where;var f=this._createSfOptions(b),g=b.data.Id;g?(f.key=g,this._getData().getSingle(f)):(f.query=e,this._getData().get(f))},update:function(a){var b=this._createSfOptions(a);b.key=a.data.Id,b.data=a.data,this._getData().update(b)},create:function(a){delete a.data.Id;var b=this._createSfOptions(a);b.data=a.data,this._getData().create(b)},destroy:function(a){var b=this._createSfOptions(a);b.key=a.data.Id,this._getData().destroy(b)},_getData:function(){return this.sitefinity$.data(this.dataOptions)},_createSfOptions:function(a){var b={successCb:function(b){a.success(b.value)},failureCb:function(b){a.error(b.value)}};return b}}));b.extend(!0,c.data,{transports:{sitefinity:f},schemas:{sitefinity:{type:"json",total:function(a){return a.hasOwnProperty("$count")?a.$count:a.length},data:function(a){return a.value||a},model:{id:"Id"}}}});var g=["startswith","endswith","contains","containsor","doesnotcontain"],h={build:function(a,b){h._build(a,b)},_build:function(a,b){h._isSimple(b)?h._simple(a,b):h._isAny(b)?h._any(a,b):h._isStringFilter(b)?h._buildStringFilter(a,b):h._isAnd(b)?h._and(a,b):h._isOr(b)&&h._or(a,b);
},_isSimple:function(a){return"undefined"==typeof a.logic&&!h._isStringFilter(a)},_simple:function(a,b){var c=b.value,d=b.field;switch(b.operator){case"eq":a.eq(d,c);break;case"neq":a.ne(d,c);break;case"gt":a.gt(d,c);break;case"lt":a.lt(d,c);break;case"gte":a.ge(d,c);break;case"lte":a.le(d,c);break;default:throw new Error("Unknown operator type.")}},_isStringFilter:function(a){var c=a.operator||"invalid";return c=c.toLowerCase(),-1!==b.inArray(c,g)},_buildStringFilter:function(a,b){var c=b.value,d=b.field,e=b.operator.toLowerCase();switch(e){case"contains":a.contains(d,c);break;case"doesnotcontain":a.not().contains(d,c).done();break;case"startswith":a.startsWith(d,c);break;case"endswith":a.endsWith(d,c);break;default:throw new Error("Unknown operator type.")}},_isAnd:function(a){return"and"===a.logic},_and:function(a,b){this._binaryOperator("and",a,b)},_isAny:function(a){return("contains"===a.operator||"containsor"===a.operator)&&a.value instanceof Array},_any:function(a,b){var c=a.and().any();"containsor"===b.operator&&(c=a.or().any());for(var d=0;d<b.value.length;d++)c.eq(b.field,b.value[d]);return c.done().done()},_isOr:function(a){return"or"===a.logic},_or:function(a,b){this._binaryOperator("or",a,b)},_binaryOperator:function(a,b,c){var d,e,f=c.filters,g=b[a]();for(d=0,e=f.length;e>d;d++)h._build(g,f[d]);b=g.done()}}};return a(),a}()},{"./OrderProperty":5,"./Query":6}],15:[function(a,b,c){!function(){var c=a("./Sitefinity");c.Query=a("./Query");var d=a("./kendo.sitefinity");c.initDataSource=d,b.exports=c}()},{"./Query":6,"./Sitefinity":11,"./kendo.sitefinity":14}],16:[function(a,b,c){var d={};d.inheritsFrom=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a},d.isString=function(a){return"string"==typeof a||a instanceof String},d.isNumber=function(a){return"number"==typeof a&&isFinite(a)},d.isBoolean=function(a){return"boolean"==typeof a},String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),d.hex16=function(){return Math.floor(65536*(1+Math.random())).toString(16).substr(1)},d.addTrailingSlash=function(a){return a=d.removeSlashes(a),a+="/"},d.removeSlashes=function(a){var b=a,c=b.substr(0,1);"/"==c&&(b=b.substr(1));var d=b.substr(-1);return"/"==d&&(b=b.substr(0,a.length-1)),b},d.clone=function(a,b,c){b||(b={});for(var d in a)a[d]&&a[d].constructor&&a[d].constructor===Object&&"function"==typeof a[d]?(b[d]=b[d]||{},arguments.callee(b[d],a[d])):b[d]=a[d],"function"==typeof c&&c(b);return b},d._convertDateFieldToISOString=function(a){for(obj in a)a[obj]instanceof Date&&(a[obj]=a[obj].toISOString())},d._convertToDateObject=function(a){for(var b in a)a[b]instanceof Array||a[b]instanceof Object?this._convertToDateObject(a[b]):a[b]=d._tryFormatFieldToDate(a[b])},d._tryFormatFieldToDate=function(a){return/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/.test(a)&&(a=new Date(a)),a},b.exports=d},{}]},{},[15])(15)});